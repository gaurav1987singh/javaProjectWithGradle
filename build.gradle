plugins {
  id "java"
  id "org.sonarqube" version "2.7"
  id "maven"
  id "com.jfrog.artifactory" version "4.9.3"
}

repositories {
    mavenLocal()
    maven {
           url = uri("https://repo.maven.apache.org/maven2")
    }
}

group = "com.sample.program"
version = "1.0"

dependencies {
		testCompile 'junit:junit:4.12'
	}

jar {
    manifest {
        attributes 'Main-Class': 'HelloWorld'
    }
}

def localMavenRepo = 'file://' + new File(System.getProperty('user.home'), '.m2/repository').absolutePath
uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: "file://C:/Users/585933/.m2/repository/")
	}
    }
}

artifactory {
    contextUrl = "${artifactory_contextUrl}"   //The base Artifactory URL if not overridden by the publisher/resolver
    publish {
        repository {
            repoKey = 'libs-snapshot-local'
            username = "${artifactory_user}"
            password = "${artifactory_password}"
            maven = true
            
        }
    }
    resolve {
        repository {
            repoKey = 'libs-snapshot'
            username = "${artifactory_user}"
            password = "${artifactory_password}"
            maven = true
            
        }
    }
}
